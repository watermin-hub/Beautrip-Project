# 작업 일지 - 2024년 12월 7일

## 📋 작업 개요

BeauTrip 프로젝트의 로그인 시스템 및 커뮤니티 글쓰기 기능 구현

---

## ✅ 완료된 작업

### 1. 프로젝트 환경 설정

- **npm ci vs npm install 차이점 설명**
  - `npm ci`: CI/CD 환경용, package-lock.json 엄격히 따름, 기존 node_modules 삭제 후 재설치
  - `npm install`: 개발용, package-lock.json 업데이트 가능, 증분 설치
  - 현재 상태: `npm ci`로 설치 완료, 추가 작업 불필요

### 2. 배포 가능 여부 확인

- **프로젝트 상태 점검**
  - TypeScript 설정 정상
  - Next.js 14.0.4 구성 확인
  - 린터 에러 없음
  - 주요 컴포넌트 구조 확인
  - **결론**: 기본 틀 완성, GA4 이벤트 설계 정의서 작성 가능한 단계

### 3. 로그인 시스템 구현

#### 3.1 로그인 UI 구현 (IA 기반)

- **LoginModal.tsx 개선**
  - 로고 표시 (크기: 180x60)
  - 연동 계정 버튼 리스트 구현
  - ID 로그인 폼 구현
  - 계정 찾기/문의하기 링크 추가

#### 3.2 로그인 UI 레퍼런스 반영

- **기본 화면 구성**

  - 라인으로 시작하기
  - 위챗으로 시작하기
  - 구글로 시작하기
  - "아이디 또는 다른 방법으로 로그인" 버튼

- **"다른 방법으로 시작하기" 바텀시트**
  - 클릭 시 나머지 5가지 소셜 로그인 표시 (카카오, 틱톡, X, 애플, 페이스북)
  - 원형 아이콘 버튼으로 표시
  - 하단에 "아이디로 로그인" 버튼

#### 3.3 소셜 로그인 아이콘 실제 이미지 적용

- **아이콘 URL 추가**

  - 라인: Namu Wiki SVG
  - 위챗: Google Play 이미지
  - 구글: Wikimedia Commons 이미지
  - 카카오: Namu Wiki SVG
  - 틱톡: Namu Wiki SVG
  - X: Namu Wiki SVG
  - 페이스북: Namu Wiki SVG
  - 애플: Namu Wiki SVG

- **Next.js 이미지 설정**
  - `next.config.js`에 외부 이미지 도메인 허용 추가
  - `i.namu.wiki`, `play-lh.googleusercontent.com`, `upload.wikimedia.org`

#### 3.4 로그인 화면 UX 개선

- **세로 중앙 정렬**

  - flexbox를 사용한 콘텐츠 중앙 정렬
  - 헤더는 상단 고정, 콘텐츠는 중앙 배치

- **언어 선택 드롭다운 위치 수정**
  - 하단에 위치한 언어 선택 버튼의 드롭다운이 위쪽으로 열리도록 변경

### 4. 마이페이지 접근 제어

- **로그인 상태 관리**
  - 로그인하지 않은 경우 마이페이지 내용 숨김
  - 로그인 모달만 표시
  - 로그인 모달 닫기 시 홈으로 이동
  - 로그인한 사용자 정보만 표시
  - 로그아웃 기능 추가

### 5. 커뮤니티 글쓰기 기능 구현

#### 5.1 CommunityWriteModal 개선

- **3가지 글쓰기 옵션**
  - 시술 후기
  - 병원 후기
  - 고민글
  - 내 글 관리 (마지막에 추가)

#### 5.2 시술 후기 작성 폼 (`ProcedureReviewForm.tsx`)

- **구현된 필드**
  - 시술 날짜 (필수)
  - 카테고리 (필수)
  - 병원명 검색 (필수, 2글자 이상)
  - 시술/수술 명 토글 목록 (필수)
  - 시술/수술 비용 (만원 단위)
  - 시술/수술 시간 (분 단위)
  - 회복기간 (일 단위)
  - 성별 선택 (여/남, 필수)
  - 연령대 선택 (20대/30대/40대/50대, 필수)
  - 글 작성 (30자 이상, 필수)
  - 태그 추가
  - 사진첨부 (최대 4장)
  - 저장하기/작성완료 버튼

#### 5.3 병원 후기 작성 폼 (`HospitalReviewForm.tsx`)

- **구현된 필드**
  - 병원 방문일 (필수)
  - 시술 카테고리 (대/중/소분류, 필수)
  - 전체적인 수술 만족도 (1~5 별점)
  - 병원 친절도 (1~5 별점)
  - 통역 여부 (T/F)
  - 통역 만족도 (1~5 별점, 통역 있음일 때만)
  - 앱사용만족도 (1~5 별점)
  - 글 작성 (30자 이상, 필수)
  - 태그 추가
  - 사진첨부 (최대 4장)
  - 저장하기/작성완료 버튼

#### 5.4 고민글 작성 폼 (`ConcernPostForm.tsx`)

- **구현된 필드**
  - 제목 (필수)
  - 부제 (선택)
  - 고민 카테고리 (필수)
  - 고민 글 (30자 이상, 필수)
  - 태그 추가
  - 저장하기/작성완료 버튼

### 6. 플로팅 버튼 개선

- **CommunityFloatingButton 간소화**
  - 플로팅 버튼 클릭 시 바로 CommunityWriteModal 열림
  - 중간 메뉴 제거
  - "리뷰 작성" 메뉴 제거

### 7. 홈페이지 개선

#### 7.1 UI 정리

- **캘린더 사이드바 제거**
  - 플로팅 상태로 떠다니던 CalendarSidebar 제거
  - 홈페이지 레이아웃 정리

#### 7.2 리뷰 버튼 연결

- **"리뷰 쓰고 더 많은 정보 얻기" 버튼**
  - 클릭 시 CommunityWriteModal 열림
  - 커뮤니티 페이지의 연필 버튼과 동일한 동작

#### 7.3 대분류 카테고리 표시 로직 개선

- **조건부 렌더링**
  - 일정 선택 전: 대분류 카테고리 버튼 숨김 (여행 일정 선택칸만 표시)
  - 일정 선택 후: 대분류 카테고리 버튼 표시
  - 카테고리 선택 후 맞춤 시술 추천 표시 시에도 카테고리 계속 표시
  - 비활성화 상태의 카테고리 버튼 제거

#### 7.4 z-index 수정

- **CommunityWriteModal z-index 증가**
  - 오버레이와 모달의 z-index를 `z-50`에서 `z-[100]`으로 변경
  - 하단 네비게이션(`z-50`)보다 위에 표시되도록 수정

---

## 📁 생성/수정된 파일

### 새로 생성된 파일

1. `components/ProcedureReviewForm.tsx` - 시술 후기 작성 폼
2. `components/HospitalReviewForm.tsx` - 병원 후기 작성 폼
3. `components/ConcernPostForm.tsx` - 고민글 작성 폼

### 수정된 파일

1. `components/LoginModal.tsx` - 로그인 UI 전면 개편
2. `components/MyPage.tsx` - 로그인 접근 제어 추가
3. `components/CommunityWriteModal.tsx` - 3가지 글쓰기 옵션으로 개편
4. `components/CommunityFloatingButton.tsx` - 간소화 및 바로 모달 열기
5. `components/HomePage.tsx` - 캘린더 사이드바 제거, 리뷰 버튼 연결, 카테고리 표시 로직 개선
6. `next.config.js` - 외부 이미지 도메인 허용 추가

---

## 🎯 주요 성과

1. **로그인 시스템 완성**

   - IA 기반 로그인 UI 구현
   - 레퍼런스 이미지 반영
   - 실제 소셜 로그인 아이콘 적용
   - 로그인 상태 관리 및 접근 제어

2. **커뮤니티 글쓰기 기능 구현**

   - 3가지 글쓰기 양식 완성
   - 레퍼런스 이미지 기반 UI 구현
   - 필수/선택 필드 구분
   - 이미지 업로드 기능

3. **UX 개선**
   - 홈페이지 레이아웃 정리
   - 플로팅 버튼 간소화
   - 조건부 UI 표시로 사용자 경험 향상

---

## 🔄 다음 단계 (TODO)

1. **API 연동**

   - 실제 소셜 로그인 API 연동
   - 글쓰기 폼 제출 API 연동
   - 사용자 인증 시스템 구축

2. **내 글 관리 기능**

   - 내 글 관리 페이지 구현
   - 작성한 글 목록 표시
   - 글 수정/삭제 기능

3. **GA4 이벤트 설계 정의서 작성**
   - 이벤트 트래킹 설계
   - 주요 사용자 행동 추적

---

## 📝 기술 스택

- Next.js 14.0.4
- React 18.2.0
- TypeScript 5
- Tailwind CSS 3.3.0
- React Icons 4.12.0

---

## 💡 참고사항

- 모든 소셜 로그인 아이콘은 외부 URL 사용 (Namu Wiki, Google Play, Wikimedia Commons)
- 이미지 업로드는 현재 클라이언트 측에서만 처리 (실제 서버 업로드는 추후 구현)
- 로그인 및 글쓰기 기능은 현재 모의(mock) 데이터로 동작
